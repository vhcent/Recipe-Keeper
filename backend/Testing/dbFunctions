function addRecipe(name, URL, APIRes) {
    connection.query(
        `select exists(select * from saved where name = "${name}" and url = "${URL}");`,
        (err, result, fields) => {
            var res = result[0][fields[0].name]; //get the result from the SQL command
            console.log(result);
            console.log(fields);
            if (err) {
                console.log("Error", err);
                if (APIRes)
                    return APIRes.status(204).send("Something went wrong"); //wrong code probably
                return;
            }
            if (res) {
                console.log("Duplicate");
                if (APIRes)
                    return APIRes.status(204).send("Cannot add duplicates"); //wrong code probably
                return;
            } //Duplicate exists
            //Second API call made inside a callback function bc it depends on the result
            connection.query(
                `insert into Saved (Name, URL) values("${name}", "${URL}");`,
                (err, result) => {
                    errorStatus(
                        err,
                        result,
                        `added recipe ${name} with URL ${URL}`
                    );
                    //getRecipe()//get the latest and send it back
                }
            );
        }
    );
}

module.exports = { addRecipe };
